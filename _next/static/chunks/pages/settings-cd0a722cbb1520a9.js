(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{8356:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings",function(){return n(955)}])},955:function(e,t,n){"use strict";n.r(t);var s=n(5893),i=n(7294),l=n(4341),a=n(2812),o=n(6434),r=n(7743),c=n(8499),_=n(1163),d=n(8074),u=n(4124),g=n.n(u),f=n(9457),h=n(3504);t.default=()=>{let{getAuthToken:e,API_URL:t,apiRequest:n}=(0,i.useContext)(f.V),[u,C]=(0,i.useState)([]),m=(0,i.useCallback)(()=>{n("user-file-list","GET").then(e=>{C(e.files)}).catch(e=>{console.error("Error fetching user files:",e)})},[n]);(0,i.useEffect)(()=>{let e=(0,r.Aj)(c.I,async e=>{if(e){let t=e.uid;localStorage.setItem("User",t),m()}});return()=>e()},[m]);let[p,x]=(0,i.useState)(null),N=(0,_.useRouter)(),{setLoggedIn:Z,setEmailVerified:j}=(0,i.useContext)(f.V),w=(0,i.useCallback)(e=>{e.length>0&&x(e[0])},[]),{getRootProps:E,getInputProps:T}=(0,d.uI)({onDrop:w,multiple:!1}),v=e=>new Promise((t,n)=>{let s=new FileReader;s.readAsDataURL(e),s.onload=()=>t(s.result.split(",")[1]),s.onerror=n}),z=async()=>{if(p){let e=await v(p);await n("user-file-upload","POST",{filename:p.name,file_contents:e}),x(null),m()}},b=async e=>{n("user-file-delete","DELETE",{filename:e}).then(e=>{m()}).catch(e=>{console.error("Error deleting user file:",e)})},B=async()=>{try{await (0,r.w7)(c.I),Z(!1),j(!1),localStorage.removeItem("User"),N.push("/landing")}catch(e){console.error("Error logging out:",e.message)}};return(0,s.jsxs)(l.Z,{className:g().settingsContainer,children:[(0,s.jsx)(l.Z,{className:g().titleContainer,children:(0,s.jsx)(a.Z,{variant:"h6",className:g().title,children:"Settings"})}),(0,s.jsxs)(l.Z,{className:g().contentContainer,children:[(0,s.jsxs)(l.Z,{className:g().uploadContainer,children:[(0,s.jsx)(l.Z,{className:g().uploadSection,children:(0,s.jsxs)(l.Z,{className:g().dropzoneContainer,...E(),children:[(0,s.jsx)("input",{...T()}),(0,s.jsxs)(l.Z,{className:g().dropzoneMessage,children:[(0,s.jsx)(h.Z,{className:g().uploadIcon}),(0,s.jsxs)(l.Z,{className:g().dropzoneText,children:[(0,s.jsx)(a.Z,{variant:"body1",children:"Drag and drop files here"}),(0,s.jsx)(a.Z,{variant:"body2",color:"grey",children:"Limit 200MB per file"})]})]}),(0,s.jsx)(o.Z,{variant:"outlined",className:g().browseButton,children:"Browse files"})]})}),(0,s.jsxs)(l.Z,{className:g().selectedFileContainer,children:[(0,s.jsx)(a.Z,{variant:"body2",className:g().fileName,children:p?p.name:"No file chosen"}),(0,s.jsx)(o.Z,{variant:"contained",onClick:z,disabled:!p,className:g().uploadButton,children:"Upload File"})]})]}),(0,s.jsxs)(l.Z,{children:[(0,s.jsx)(a.Z,{className:g().fileContainerTitle,children:"Files Uploaded"}),(0,s.jsx)(l.Z,{className:g().fileContainer,children:u.map(e=>(0,s.jsxs)(l.Z,{className:g().file,children:[(0,s.jsx)(a.Z,{noWrap:!0,className:g().fileText,children:e}),(0,s.jsx)(o.Z,{className:g().fileDelete,onClick:()=>b(e),variant:"text",children:"Delete"})]},e))})]}),(0,s.jsx)(l.Z,{className:g().logoutContainer,children:(0,s.jsx)(o.Z,{variant:"contained",color:"error",onClick:B,className:g().logoutButton,children:"Logout"})})]})]})}},4124:function(e){e.exports={settingsContainer:"settings_settingsContainer__O2wbI",titleContainer:"settings_titleContainer__J6CO4",title:"settings_title__09AdH",contentContainer:"settings_contentContainer__TWQEf",uploadContainer:"settings_uploadContainer__IntOH",dropzoneContainer:"settings_dropzoneContainer__ZN069",dropzoneMessage:"settings_dropzoneMessage__vZd3s",uploadIcon:"settings_uploadIcon__A_m_n",dropzoneText:"settings_dropzoneText__URg6g",browseButton:"settings_browseButton__0f5Vz",selectedFileContainer:"settings_selectedFileContainer__fTQeo",fileName:"settings_fileName__vuvfZ",uploadButton:"settings_uploadButton__AcHaA",fileContainer:"settings_fileContainer__2Qwkd",fileContainerTitle:"settings_fileContainerTitle__Qe0Ei",file:"settings_file__r2v7S",fileText:"settings_fileText__XV_lz",fileDelete:"settings_fileDelete___P3nD",logoutContainer:"settings_logoutContainer__XzeJO",logoutButton:"settings_logoutButton___0rzE"}}},function(e){e.O(0,[348,888,774,179],function(){return e(e.s=8356)}),_N_E=e.O()}]);