(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[504],{5270:function(e,a,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/finance",function(){return n(4693)}])},4693:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return u}});var r=n(5893),i=n(7294),s=n(4341),t=n(2812),l=n(6434),c=n(8648),o=n.n(c),d=n(5430),h=n(3148);h.kL.register(h.uw,h.f$,h.ZL,h.jn,h.od,h.u,h.De,h.Gu);let m=e=>{let{stockData:a=[],ticker:n=""}=e,s=(0,i.useMemo)(()=>a&&0!==a.length?{labels:a.map(e=>e.date),datasets:[{label:"Stock Price ($) - ".concat(n),data:a.map(e=>e.price),fill:!1,backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)"}]}:{labels:["label"],datasets:[{label:"Stock Price ($) - ".concat(n),data:[],fill:!1,backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)"}]},[a,n]);return(0,r.jsx)(d.x1,{data:s,options:{maintainAspectRatio:!1}})};var x=n(9457),f=n(4307),u=()=>{let{selectedDrug:e,getFinancial:a}=i.useContext(x.V),[n,c]=(0,i.useState)([]),d=(0,i.useCallback)(()=>{if(!e)return[];let n=a();return n&&n.companies?Object.keys(n.companies):[]},[e,a]),[h,u]=(0,i.useState)(0),j=(0,i.useCallback)(()=>{if(!e||!a()||!d())return"";let n=d();return h>=n.length&&u(0),n[h]},[h,d,a,e]),b=(0,i.useCallback)(()=>j()?a().companies[j()]:{},[h,j,a]);async function N(e){let a=await fetch("https://www.alphavantage.co/query?function=TIME_SERIES_WEEKLY&symbol=".concat(e,"&apikey=QX031MC83QNVYX78")),n=(await a.json())["Weekly Time Series"];return n?((n=Object.entries(n).map(e=>{let[a,n]=e;return{date:a,price:parseFloat(n["4. close"])}})).length>104&&(n=n.slice(0,104)),n=n.reverse()):[]}let[_,g]=(0,i.useState)("");(0,i.useEffect)(()=>{let e=b();g(e&&e.ticker&&e.ticker.length>0?e.ticker[0]:"")},[b]),(0,i.useEffect)(()=>{if(!j())return;let{ticker:e}=b();e&&"N/A"!=e&&N(e).then(c)},[a,j,b]);let v=()=>{if(!e)return[];let n=a();return n&&n.ingredients?n.ingredients.sort((e,a)=>a[2]-e[2]).slice(0,5).map(e=>{let a=e[0],n=e[1].trim();return n.length>0&&"n/a"!==n.toLowerCase()&&"quantity not specified"!==n.toLowerCase()&&"unspecified"!==n.toLowerCase()&&(a=n+" "+a),{label:a,value:e[2]}}):[]};return(0,r.jsxs)(s.Z,{className:o().container,children:[(0,r.jsxs)(s.Z,{className:o().leftContainer,children:[(0,r.jsxs)(s.Z,{className:o().pieChartContainer,children:[(0,r.jsx)(t.Z,{variant:"h6",className:o().subTitle,children:"News"}),(0,r.jsx)("br",{}),(0,r.jsx)("ul",{className:o().newsList,children:e&&b()&&b().news?b().news.map((e,a)=>(0,r.jsx)("li",{className:o().newsItem,children:(0,r.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:o().newsLink,children:(0,r.jsx)(t.Z,{className:o().infoText,variant:"body2",children:e.title})})},a),b().news.length>0?null:(0,r.jsx)("li",{className:o().newsItem,children:"No news available"})):"No drug selected"})]}),(0,r.jsxs)(s.Z,{className:o().pieChartContainer,style:{overflow:"auto"},children:[(0,r.jsx)(t.Z,{variant:"h6",className:o().subTitle,children:"Company Contact Information"}),(0,r.jsx)("br",{}),(0,r.jsx)("ul",{className:o().newsList,children:e&&b()&&b().contact?(0,r.jsxs)(r.Fragment,{children:[b().contact.website&&(0,r.jsx)("li",{className:o().newsItem,children:(0,r.jsx)("a",{href:b().contact.website,className:o().newsLink,target:"_blank",rel:"noopener noreferrer",children:(0,r.jsx)(t.Z,{className:o().infoText,variant:"body2",children:b().contact.website})})}),b().contact.emails.map((e,a)=>(0,r.jsx)("li",{className:o().newsItem,children:(0,r.jsx)("a",{href:"mailto:".concat(e),target:"_blank",rel:"noopener noreferrer",className:o().newsLink,children:(0,r.jsx)(t.Z,{className:o().infoText,variant:"body2",children:e})})},a)),b().contact.phone_numbers.map((e,a)=>(0,r.jsx)("li",{className:o().newsItem,children:(0,r.jsx)("a",{href:"tel:".concat(e),target:"_blank",rel:"noopener noreferrer",className:o().newsLink,children:(0,r.jsx)(t.Z,{className:o().infoText,variant:"body2",children:e})})},a))]}):(0,r.jsx)(t.Z,{className:o().infoText,children:"No drug selected"})})]})]}),(0,r.jsxs)(s.Z,{className:o().rightContainer,children:[(0,r.jsxs)(s.Z,{className:o().liveTrackerContainer,children:[(0,r.jsxs)(s.Z,{className:o().liveTrackerBox,children:[(0,r.jsx)(t.Z,{variant:"h6",className:o().subTitle,children:"Drug Company"}),(0,r.jsx)(t.Z,{variant:"h4",className:o().infoText,children:j()||"No drug selected"}),d().length>1&&(0,r.jsxs)(l.Z,{onClick:()=>{u(e=>(e+1)%d().length)},children:["Next Company",(0,r.jsx)("i",{className:"fa-solid fa-arrow-right"})]})]}),(0,r.jsxs)(s.Z,{className:o().liveTrackerBox,children:[(0,r.jsx)(t.Z,{variant:"h6",className:o().subTitle,children:"Amount Awarded"}),(0,r.jsx)(t.Z,{variant:"h4",className:o().infoText,children:e&&a()&&a().amount_awarded?"$".concat(a().amount_awarded.toLocaleString()):"No drug selected"})]})]}),(0,r.jsxs)(s.Z,{className:o().liveTrackerContainer,children:[(0,r.jsxs)(s.Z,{className:o().liveTrackerBox,children:[(0,r.jsx)(t.Z,{variant:"h5",className:o().subTitle,children:"Stock Price"}),(0,r.jsx)(m,{stockData:n,ticker:_})]}),(0,r.jsxs)(s.Z,{className:o().liveTrackerBox,children:[(0,r.jsx)(t.Z,{variant:"h6",className:o().subTitle,children:"Ingredients Cost Distribution"}),v().length>0?(0,r.jsx)(f.u,{series:[{data:v(),valueKey:"value",innerRadius:50,outerRadius:100,highlightScope:{fade:"global",highlight:"item"},faded:{innerRadius:50,additionalRadius:-10,color:"gray"},arcLabel:null}],height:350,margin:{left:0,right:0,top:-100,bottom:0},tooltip:{trigger:"item",formatter:e=>{let{data:a}=e;return"".concat(a.label,": $").concat(a.value.toLocaleString())}},slotProps:{legend:{direction:"row",position:{vertical:"bottom",horizontal:"center"},itemMarkWidth:10,itemMarkHeight:10,markGap:5,itemGap:20,labelStyle:{fill:"white",fontFamily:"var(--font-family)",fontSize:"0.75rem"},hidden:!1,sx:{flexWrap:"wrap",maxWidth:1e3,justifyContent:"center"}}}}):(0,r.jsx)(t.Z,{children:"No ingredient data available"})]})]}),(0,r.jsx)(s.Z,{className:o().liveTrackerContainer,children:(0,r.jsxs)(s.Z,{className:"".concat(o().liveTrackerBox," ").concat(o().liveTrackerBig),children:[(0,r.jsx)(t.Z,{variant:"h6",className:o().subTitle,children:"Financial Overview"}),(0,r.jsx)(s.Z,{className:o().financialOverview,children:e&&b()&&b().sec?(b().sec.urls.length>0?(t.Z,o().infoText,b().sec.urls.map((e,a)=>(0,r.jsx)(s.Z,{className:o().secItem,children:(0,r.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:o().secLink,children:(0,r.jsx)(t.Z,{className:o().infoText,variant:"body2",children:e})})},a))):(0,r.jsx)(t.Z,{className:o().infoText,children:"No SEC filings available"}),b().sec.tables.length>0?b().sec.tables.map((e,a)=>(0,r.jsxs)(s.Z,{className:o().secTable,children:[(0,r.jsx)(t.Z,{variant:"body2",className:o().infoText,children:e[0]}),(0,r.jsx)(s.Z,{className:o().tableContainer,children:(0,r.jsxs)("table",{className:o().financialTable,children:[(0,r.jsx)("thead",{children:(0,r.jsx)("tr",{children:e[1][0].map((e,a)=>(0,r.jsx)("th",{children:e},a))})}),(0,r.jsx)("tbody",{children:e[1].slice(1).map((e,a)=>(0,r.jsx)("tr",{children:e.map((e,a)=>(0,r.jsx)("td",{children:e},a))},a))})]})}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{})]},a)):(0,r.jsx)(t.Z,{className:o().infoText,children:"No financial tables available"})):(0,r.jsx)(t.Z,{className:o().infoText,children:"No financial data available"})})]})})]})]})}},8648:function(e){e.exports={container:"finance_container__XXrI8",subTitle:"finance_subTitle__FbrQ_",infoText:"finance_infoText__odZkz",leftContainer:"finance_leftContainer__YKsOw",pieChartContainer:"finance_pieChartContainer__PO06j",newsList:"finance_newsList__juZQh",newsItem:"finance_newsItem__HolWu",newsLink:"finance_newsLink__c5q22",rightContainer:"finance_rightContainer__m7L5r",liveTrackerContainer:"finance_liveTrackerContainer__1mHmJ",liveTrackerBox:"finance_liveTrackerBox__HFMqx",liveTrackerBig:"finance_liveTrackerBig__5CQw7",areaChartContainer:"finance_areaChartContainer__VmcG8",financialOverview:"finance_financialOverview__zpgNS"}}},function(e){e.O(0,[196,706,888,774,179],function(){return e(e.s=5270)}),_N_E=e.O()}]);